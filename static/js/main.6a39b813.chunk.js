(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n.n(r),o=n(6),s=n.n(o),i=(n(15),n(9)),l=n(2),u=c.a.createContext(),d=n(7),j=n(8),m=new(function(){function e(t){Object(d.a)(this,e),this._url=t.baseUrl,this._headers=t.headers}return Object(j.a)(e,[{key:"loadUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then((function(e){if(!e.ok)throw new Error("'Server error: ',".concat(e.status));return e.json()}))}},{key:"updateUserInfo",value:function(e){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw new Error("'Server error: ',".concat(e.status));return e.json()}))}},{key:"updateAvatar",value:function(e){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw new Error("'Server error: ',".concat(e.status));return e.json()}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then((function(e){if(!e.ok)throw new Error("'Server error: ',".concat(e.status));return e.json()}))}},{key:"addCard",value:function(e){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then((function(e){if(!e.ok)throw new Error("'Server error: ',".concat(e.status));return e.json()}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){if(!e.ok)throw new Error("'Server error: ',".concat(e.status));return e.ok}))}},{key:"changeLikeCardStatus",value:function(e,t){return fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"".concat(t),headers:this._headers}).then((function(e){if(!e.ok)throw new Error("'Server error: ',".concat(e.status));return e.json()}))}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-17",headers:{authorization:"a5ab0f86-d530-4405-820a-39c59495e62f","Content-Type":"application/json"}});var f=function(){return Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("img",{src:"data:image/png;base64,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",alt:"\u041b\u043e\u0433\u043e",className:"header__logo"})})};var h=function(){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsx)("h3",{className:"footer__title",children:"\xa9 2020 Mesto Russia"})})};var b=function(e){var t=c.a.useContext(u),n=e.card.owner._id===t._id,r=e.card.likes.some((function(e){return e._id===t._id})),o="button button_type_delete ".concat(n?"":"button_type_delete_hidden"),s="button button_type_like ".concat(r?"button_type_like_clicked":"");return Object(a.jsxs)("li",{className:"element",children:[Object(a.jsx)("button",{className:o,onClick:function(){e.onCardDelete(e.card)}}),Object(a.jsx)("button",{className:"button button_type_enlarge",onClick:function(){e.onCardClick(e.card)},children:Object(a.jsx)("img",{src:e.card.link,alt:e.card.name,class:"element__image"})}),Object(a.jsxs)("div",{className:"element__container",children:[Object(a.jsx)("h2",{className:"element__title",children:"".concat(e.card.name)}),Object(a.jsxs)("div",{className:"element__likes",children:[Object(a.jsx)("button",{className:s,onClick:function(){e.onCardLike(e.card)}}),Object(a.jsx)("h3",{className:"element__likes_number",children:e.card.likes.length})]})]})]})};var p=function(e){var t=c.a.useContext(u);return Object(a.jsxs)("main",{className:"content",children:[Object(a.jsxs)("section",{className:"profile",children:[Object(a.jsx)("button",{className:"button button_type_avatar",onClick:e.onEditAvatar,children:Object(a.jsx)("img",{src:t.avatar,alt:t.name,className:"avatar"})}),Object(a.jsxs)("div",{className:"profile__info",children:[Object(a.jsx)("h1",{className:"profile__name",children:t.name}),Object(a.jsx)("button",{className:"button button_type_edit",onClick:e.onEditProfile}),Object(a.jsx)("p",{className:"profile__job",children:t.about})]}),Object(a.jsx)("button",{className:"button button_type_add",onClick:e.onAddPlace})]}),Object(a.jsx)("section",{children:Object(a.jsx)("ul",{className:"elements",children:e.cards.map((function(t){return Object(a.jsx)(b,{card:t,onCardClick:e.onCardClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete},t._id)}))})})]})};var O=function(e){var t="popup popup_".concat(e.name);return e.isOpen&&(t+=" popup_opened"),Object(a.jsx)("div",{className:t,children:Object(a.jsxs)("div",{className:"popup__container",children:[Object(a.jsx)("h2",{className:"popup__title",children:e.title}),Object(a.jsxs)("form",{className:"form",name:e.name,onSubmit:e.onSubmit,noValidate:!0,children:[e.children,Object(a.jsx)("button",{className:"button button_type_save",type:"submit",value:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(a.jsx)("button",{className:"button button_type_close",onClick:e.onClose})]})})};var _=function(e){var t=c.a.useContext(u),n=c.a.useState(t.name),r=Object(l.a)(n,2),o=r[0],s=r[1],i=c.a.useState(t.about),d=Object(l.a)(i,2),j=d[0],m=d[1];function f(e){"name"===e.target.id?s(e.target.value):m(e.target.value)}return c.a.useEffect((function(){s(t.name),m(t.about)}),[t]),Object(a.jsxs)(O,{isOpen:e.isOpen,name:"editProfile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:o,about:j})},children:[Object(a.jsxs)("label",{htmlFor:"name",className:"form__field",children:[Object(a.jsx)("input",{type:"text",className:"form__input form__input_name",value:o,placeHolder:o,id:"name",name:"name",required:!0,minLength:"2",maxLength:"40",onChange:f}),Object(a.jsx)("span",{className:"form__error",id:"name-error"})]}),Object(a.jsxs)("label",{htmlFor:"description",className:"form__field",children:[Object(a.jsx)("input",{type:"text",className:"form__input form__input_description",value:j,placeHolder:j,id:"description",name:"description",required:!0,minLength:"2",maxLength:"200",onChange:f}),Object(a.jsx)("span",{className:"form__error",id:"description-error"})]})]})};var x=function(e){var t=c.a.useRef();return Object(a.jsx)(O,{name:"editAvatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(n){n.preventDefault(),e.onUpdateAvatar({avatar:t.current.value})},children:Object(a.jsxs)("label",{htmlFor:"link",className:"form__field",children:[Object(a.jsx)("input",{type:"url",className:"form__input form__input_avatarLink",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"avatarLink",id:"avatar",required:!0,ref:t}),Object(a.jsx)("span",{className:"form__error",id:"link-error"})]})})};var v=function(e){var t=c.a.useState(""),n=Object(l.a)(t,2),r=n[0],o=n[1],s=c.a.useState(""),i=Object(l.a)(s,2),u=i[0],d=i[1];function j(e){"elemTitle"===e.target.id?o(e.target.value):d(e.target.value)}return Object(a.jsxs)(O,{isOpen:e.isOpen,name:"addPlace",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435c\u0442\u043e",onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlace({name:r,link:u}),o(""),d("")},children:[Object(a.jsxs)("label",{htmlFor:"elemTitle",className:"form__field",children:[Object(a.jsx)("input",{type:"text",className:"form__input form__input_name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"elemTitle",id:"elemTitle",value:r,required:!0,minLength:"2",maxLength:"30",onChange:j}),Object(a.jsx)("span",{className:"form__error",id:"elemTitle-error"})]}),Object(a.jsxs)("label",{htmlFor:"link",class:"form__field",children:[Object(a.jsx)("input",{type:"url",className:"form__input form__input_description",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"link",id:"link",value:u,required:!0,onChange:j}),Object(a.jsx)("span",{className:"form__error",id:"link-error"})]})]})};var k=function(e){var t="popup popup_openImage";return e.card._id&&(t+=" popup_opened"),Object(a.jsx)("div",{className:t,children:Object(a.jsxs)("div",{className:"popup__container_image",children:[Object(a.jsx)("img",{className:"popup__image",src:e.card.link,alt:e.card.name}),Object(a.jsx)("h2",{className:"popup__title_image",children:e.card.name}),Object(a.jsx)("button",{className:"button button_type_close",onClick:e.onClose})]})})};var C=function(){var e=c.a.useState({}),t=Object(l.a)(e,2),n=t[0],r=t[1],o=c.a.useState(!1),s=Object(l.a)(o,2),d=s[0],j=s[1],b=c.a.useState(!1),O=Object(l.a)(b,2),C=O[0],g=O[1],A=c.a.useState(!1),N=Object(l.a)(A,2),w=N[0],S=N[1],y=c.a.useState([]),E=Object(l.a)(y,2),L=E[0],P=E[1],T=c.a.useState({}),U=Object(l.a)(T,2),D=U[0],M=U[1];function J(){g(!1),j(!1),S(!1),M({})}return c.a.useEffect((function(){m.loadUserInfo().then((function(e){r(e)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u043d\u0434\u0435\u0440\u0438\u043d\u0433\u0430 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",e)})).finally((function(){console.log("\u0417\u0430\u043f\u0440\u043e\u0441 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0431\u044b\u043b")}))}),[]),c.a.useEffect((function(){m.getInitialCards().then((function(e){P(e)})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u043d\u0434\u0435\u0440\u0438\u043d\u0433\u0430 \u043a\u0430\u0440\u0442\u043e\u0447\u0435\u043a",e)})).finally((function(){console.log("\u041e\u0431\u043d\u043e\u0432\u0438\u043b\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438")}))}),[]),Object(a.jsx)("div",{className:"page",children:Object(a.jsxs)(u.Provider,{value:n,children:[Object(a.jsx)(f,{}),Object(a.jsx)(p,{onEditProfile:function(){j(!0)},onAddPlace:function(){S(!0)},onEditAvatar:function(){g(!0)},onCardClick:function(e){M(e)},cards:L,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===n._id}))?"DELETE":"PUT";m.changeLikeCardStatus(e._id,t).then((function(t){var n=L.map((function(n){return n._id===e._id?t:n}));P(n)}))},onCardDelete:function(e){m.deleteCard(e._id).then((function(){var t=L.filter((function(t){return t._id!==e._id}));P(t)}))}}),Object(a.jsx)(x,{isOpen:C,onClose:J,onUpdateAvatar:function(e){m.updateAvatar(e).then((function(e){r(e),J()})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0430\u0432\u0430\u0442\u0430\u0440\u0430: ",e)}))}}),Object(a.jsx)(_,{isOpen:d,onClose:J,onUpdateUser:function(e){m.updateUserInfo(e).then((function(e){r(e),J()})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0444\u0438\u043b\u044f: ",e)}))}}),Object(a.jsx)(v,{isOpen:w,onClose:J,onAddPlace:function(e){m.addCard(e).then((function(e){P([e].concat(Object(i.a)(L))),J()})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438: ",e)}))}}),Object(a.jsx)(k,{card:D,onClose:J}),Object(a.jsx)(h,{})]})})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(C,{})}),document.getElementById("root")),g()}},[[16,1,2]]]);
//# sourceMappingURL=main.6a39b813.chunk.js.map